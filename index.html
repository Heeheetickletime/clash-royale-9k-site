<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Noah's Clash Royale 9K Training</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;800&display=swap" rel="stylesheet">
  <style>
    /* styles unchanged */
  </style>
</head>
<body>
  <header>
    <h1>üèÜ Noah's Clash Royale 9K Training</h1>
  </header>
  <div class="container">
    <!-- sections unchanged -->
    <div class="section">
      <h2>üîπ Arena Meta Decks</h2>
      <select id="arena-select" onchange="showMetaDecks(this.value)">
        <option value="">Select Arena</option>
      </select>
      <div id="meta-decks-container" class="deck-list"></div>
    </div>
  </div>
  <script>
    const logKey = "noahTrophyLog";
    const output = document.getElementById("log-output");
    let trophyHistory = [];

    function logTrophies() {
      const date = document.getElementById("log-date").value;
      const count = document.getElementById("trophy-count").value;
      if (!date || !count) return alert("Please enter both date and trophy count.");
      const log = JSON.parse(localStorage.getItem(logKey)) || [];
      trophyHistory.push([...log]);
      log.push({ date, count });
      localStorage.setItem(logKey, JSON.stringify(log));
      renderLog();
    }

    function undoTrophyChange() {
      if (trophyHistory.length > 0) {
        const last = trophyHistory.pop();
        localStorage.setItem(logKey, JSON.stringify(last));
        renderLog();
      }
    }

    function renderLog() {
      const log = JSON.parse(localStorage.getItem(logKey)) || [];
      output.innerHTML = "";
      log.forEach(entry => {
        const div = document.createElement("div");
        div.className = "log-entry";
        div.textContent = `${entry.date}: ${entry.count} trophies`;
        output.appendChild(div);
      });
    }
    renderLog();

    const metaDecks = {
      1: [["Knight", "Archers", "Bomber", "Arrows", "Giant", "Mini P.E.K.K.A", "Fireball", "Musketeer"]],
      2: [["Valkyrie", "Skeleton Army", "Baby Dragon", "Mini P.E.K.K.A", "Goblin Hut", "Fireball", "Musketeer", "Knight"]],
      3: [["Witch", "Goblin Barrel", "Fireball", "Knight", "Mini P.E.K.K.A", "Valkyrie", "Bomber", "Musketeer"]],
      // Add up to Arena 23 here...
    };

    function populateArenaSelector() {
      const select = document.getElementById("arena-select");
      for (let i = 1; i <= 23; i++) {
        const option = document.createElement("option");
        option.value = i;
        option.textContent = `Arena ${i}`;
        select.appendChild(option);
      }
    }

    function showMetaDecks(arena) {
      const container = document.getElementById("meta-decks-container");
      container.innerHTML = "";
      const decks = metaDecks[arena];
      if (!decks) return;
      decks.forEach(deck => {
        const deckDiv = document.createElement("div");
        deckDiv.className = "deck";
        deckDiv.innerHTML = `<h3>Arena ${arena} Deck</h3><p>${deck.join(", ")}</p>`;
        container.appendChild(deckDiv);
      });
    }

    populateArenaSelector();
  </script>
  <button onclick="undoTrophyChange()">Undo Last Trophy Log</button>
</body>
</html>
